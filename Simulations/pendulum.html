<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendulum Simulation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            color: #2d3748;
            overflow-x: hidden;
        }

        .nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 5%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .header {
            padding: 8rem 5% 2rem;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #718096;
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 5% 5rem;
        }

        .sim-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: #f7fafc;
            border-radius: 15px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        #pendulumCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .controls-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 15px;
        }

        .control-group h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            font-size: 0.9rem;
            color: #4a5568;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group input:disabled {
            background-color: #f7fafc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .input-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #718096;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 100px;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(250, 112, 154, 0.3);
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 1rem;
        }

        .theory-section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            line-height: 1.8;
        }

        .theory-section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #2d3748;
            position: relative;
            padding-bottom: 1rem;
        }

        .theory-section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .theory-section h3 {
            font-size: 1.3rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .theory-section p {
            color: #4a5568;
            margin-bottom: 1rem;
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid #667eea;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #2d3748;
            text-align: center;
            margin: 0.5rem 0;
        }

        .info-box {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .info-box p {
            color: #234e52;
            margin: 0;
        }

        footer {
            background: #2d3748;
            color: white;
            text-align: center;
            padding: 3rem 5%;
            margin-top: 5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            transition: transform 0.3s, color 0.3s;
            text-decoration: none;
        }

        .social-links a:hover {
            transform: translateY(-3px);
            color: #667eea;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .nav-links {
                display: none;
            }

            .stats-bar {
                flex-direction: column;
            }

            .controls-section {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .canvas-container {
                height: 350px;
            }

            .theory-section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="../index.html" class="logo">STEM for All</a>
        <ul class="nav-links">
            <li><a href="../index.html">About</a></li>
            <li><a href="../simulations.html">Simulations</a></li>
            <li><a href="../articles.html">Articles</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <div class="header">
        <h1>‚è±Ô∏è Simple Pendulum Simulation</h1>
        <p>Explore the physics of pendulum motion with accurate period calculations using 8th-order approximation</p>
    </div>

    <div class="container">
        <div class="sim-section">
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-label">Time</div>
                    <div class="stat-value" id="timeDisplay">0.00 s</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Angle</div>
                    <div class="stat-value" id="angleDisplay">0.00¬∞</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Angular Velocity</div>
                    <div class="stat-value" id="omegaDisplay">0.00 rad/s</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Period (Calculated)</div>
                    <div class="stat-value" id="periodDisplay">0.00 s</div>
                </div>
            </div>

            <div class="canvas-container">
                <canvas id="pendulumCanvas"></canvas>
            </div>

            <div class="controls-section">
                <div class="control-group">
                    <h3>Pendulum Properties</h3>
                    <div class="input-group">
                        <label for="length">String Length (m)</label>
                        <input type="number" id="length" min="0.1" max="5" step="0.1" value="1.0">
                        <div class="input-display">
                            <span>Min: 0.1m</span>
                            <span>Max: 5.0m</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="angle">Initial Release Angle (degrees)</label>
                        <input type="number" id="angle" min="1" max="179" step="1" value="30">
                        <div class="input-display">
                            <span>Min: 1¬∞</span>
                            <span>Max: 179¬∞</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Physics Constants</h3>
                    <div class="input-group">
                        <label>Gravity (g)</label>
                        <input type="text" value="9.81 m/s¬≤" disabled>
                    </div>
                    <div class="input-group">
                        <label>Approximation Order</label>
                        <input type="text" value="8th power series" disabled>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" id="startBtn">‚ñ∂ Start</button>
                <button class="btn btn-secondary" id="pauseBtn" disabled>‚è∏ Pause</button>
                <button class="btn btn-danger" id="resetBtn">‚ü≤ Reset</button>
            </div>
        </div>

        <div class="sim-section">
            <h3 style="margin-bottom: 1rem; color: #2d3748;">Angular Acceleration vs Angular Displacement</h3>
            <div class="chart-container">
                <canvas id="accelChart"></canvas>
            </div>
        </div>

        <div class="theory-section">
            <h2>Understanding Simple Pendulum Motion</h2>
            
            <p>A simple pendulum consists of a mass (bob) attached to a rigid, massless string that swings under the influence of gravity. The motion is periodic and provides an excellent demonstration of harmonic motion.</p>

            <h3>Equation of Motion</h3>
            <p>The angular acceleration of a pendulum is given by:</p>

            <div class="formula-box">
                <div class="formula">Œ± = -(g/L) √ó sin(Œ∏)</div>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">where Œ± is angular acceleration, g is gravity, L is length, and Œ∏ is angle</p>
            </div>

            <h3>Period Calculation with Series Expansion</h3>
            <p>The exact period of a pendulum for any amplitude can be expressed using complete elliptic integrals of the first kind. However, this can be approximated using a power series expansion in terms of the initial angle Œ∏‚ÇÄ (in radians):</p>

            <div class="formula-box">
                <div class="formula">T = T‚ÇÄ √ó [1 + (1/16)Œ∏‚ÇÄ¬≤ + (11/3072)Œ∏‚ÇÄ‚Å¥ + (173/737280)Œ∏‚ÇÄ‚Å∂ + (22931/1321205760)Œ∏‚ÇÄ‚Å∏ + ...]</div>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">where T‚ÇÄ = 2œÄ‚àö(L/g) is the small angle approximation and Œ∏‚ÇÄ is in radians</p>
            </div>

            <p>This 8th-order approximation provides excellent accuracy for angles up to about 90 degrees. The coefficients in this expansion are:</p>
            <ul style="margin-left: 2rem; color: #4a5568;">
                <li>2nd order: 1/16 = 0.0625</li>
                <li>4th order: 11/3072 ‚âà 0.003580729</li>
                <li>6th order: 173/737280 ‚âà 0.000234623</li>
                <li>8th order: 22931/1321205760 ‚âà 0.000017353</li>
            </ul>

            <h3>Elliptic Integral Connection</h3>
            <p>The exact solution for the period involves the complete elliptic integral of the first kind K(k), where:</p>
            
            <div class="formula-box">
                <div class="formula">T = 4‚àö(L/g) √ó K(sin(Œ∏‚ÇÄ/2))</div>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">The series expansion above approximates this elliptic integral</p>
            </div>

            <h3>Angular Acceleration vs Displacement</h3>
            <p>The relationship between angular acceleration and angular displacement is nonlinear due to the sine function. The graph shows this relationship, which differs from simple harmonic motion where the relationship would be perfectly linear.</p>

            <div class="info-box">
                <p><strong>üí° Key Insight:</strong> For small angles (less than about 15¬∞), sin(Œ∏) ‚âà Œ∏, and the pendulum exhibits simple harmonic motion with a period independent of amplitude. For larger angles, the period increases with amplitude, requiring the higher-order terms in our calculation.</p>
            </div>

            <h3>Energy Conservation</h3>
            <p>Throughout the motion, mechanical energy is conserved (assuming no friction). At the highest point, all energy is potential. At the lowest point, all energy is kinetic. The exchange between these forms drives the oscillation.</p>

            <div class="formula-box">
                <div class="formula">E = mgh + (1/2)Iœâ¬≤</div>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">where E is total energy, m is mass, h is height, I is moment of inertia, and œâ is angular velocity</p>
            </div>

            <h3>Applications</h3>
            <p>Pendulum physics has numerous real-world applications:</p>
            <ul style="margin-left: 2rem; color: #4a5568;">
                <li>Grandfather clocks and timekeeping devices</li>
                <li>Seismometers for detecting earthquakes</li>
                <li>Measuring gravitational acceleration</li>
                <li>Playground swings and amusement park rides</li>
            </ul>
        </div>
    </div>

    <footer id="contact">
        <div class="footer-content">
            <p>I try my best to get the science right, but if you catch something off, please let me know so I can correct it. Thank you!</p>
            <br>
            <h3>Contacts</h3>
            <div class="social-links">
                <a href="mailto:ayadianup37@gmail.com">üìß</a>
                <a href="https://www.linkedin.com/in/anup-kumar-ayadi-044519277">üíº</a>
            </div>
            <p style="margin-top: 2rem; color: #a0aec0;">¬© 2025 Anup Kumar Ayadi</p>
        </div>
    </footer>

    <script>
        // Canvas setup
        const canvas = document.getElementById('pendulumCanvas');
        const ctx = canvas.getContext('2d');

        // Physics constants
        const GRAVITY = 9.81; // m/s¬≤
        const TIME_STEP = 0.016; // ~60 FPS

        // Simulation state
        let animationId = null;
        let isRunning = false;
        let time = 0;

        // Pendulum properties
        let length = 1.0; // meters
        let angle = Math.PI / 6; // radians (30 degrees)
        let angularVelocity = 0;
        let angularAcceleration = 0;
        let initialAngle = angle;

        // Chart setup
        const chartData = {
            labels: [],
            datasets: [
                {
                    label: 'Angular Acceleration (rad/s¬≤)',
                    data: [],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0,
                    pointRadius: 3,
                    pointHoverRadius: 5
                }
            ]
        };

        const accelChart = new Chart(document.getElementById('accelChart'), {
            type: 'scatter',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `Œ± = ${context.parsed.y.toFixed(3)} rad/s¬≤ at Œ∏ = ${context.parsed.x.toFixed(3)} rad`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Angular Displacement (radians)'
                        },
                        type: 'linear'
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Angular Acceleration (rad/s¬≤)'
                        }
                    }
                }
            }
        });

        // Resize canvas
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Calculate period using 8th order approximation
        // Using series expansion in terms of theta0 directly
        function calculatePeriod(L, theta0) {
            const T0 = 2 * Math.PI * Math.sqrt(L / GRAVITY);
            
            // Series expansion coefficients for period in terms of theta0
            const theta2 = theta0 * theta0;
            const theta4 = theta2 * theta2;
            const theta6 = theta4 * theta2;
            const theta8 = theta4 * theta4;
            
            const correction = 1 + 
                (1/16) * theta2 +
                (11/3072) * theta4 +
                (173/737280) * theta6 +
                (22931/1321205760) * theta8;
            
            return T0 * correction;
        }

        // Update physics
        function update() {
            time += TIME_STEP;

            // Calculate angular acceleration
            angularAcceleration = -(GRAVITY / length) * Math.sin(angle);

            // Update angular velocity and angle using Euler method
            angularVelocity += angularAcceleration * TIME_STEP;
            angle += angularVelocity * TIME_STEP;

            // Update displays
            document.getElementById('timeDisplay').textContent = time.toFixed(2) + ' s';
            document.getElementById('angleDisplay').textContent = (angle * 180 / Math.PI).toFixed(2) + '¬∞';
            document.getElementById('omegaDisplay').textContent = angularVelocity.toFixed(2) + ' rad/s';

            // Update chart (sample periodically to avoid clutter)
            if (Math.floor(time / TIME_STEP) % 3 === 0) {
                chartData.datasets[0].data.push({
                    x: angle,
                    y: angularAcceleration
                });

                // Limit data points
                if (chartData.datasets[0].data.length > 200) {
                    chartData.datasets[0].data.shift();
                }

                accelChart.update('none');
            }
        }

        // Draw pendulum
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const centerX = canvas.width / 2;
            const centerY = 80;
            
            // Scale length to fit canvas nicely
            const pixelLength = Math.min(canvas.height - 150, 250) * (length / 5);
            
            // Calculate bob position
            const bobX = centerX + pixelLength * Math.sin(angle);
            const bobY = centerY + pixelLength * Math.cos(angle);

            // Draw pivot point
            ctx.fillStyle = '#4a5568';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 8, 0, Math.PI * 2);
            ctx.fill();

            // Draw string
            ctx.strokeStyle = '#2d3748';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(bobX, bobY);
            ctx.stroke();

            // Draw bob
            const bobRadius = 20;
            
            // Shadow
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.beginPath();
            ctx.ellipse(bobX, bobY + bobRadius + 5, bobRadius * 0.8, bobRadius * 0.3, 0, 0, Math.PI * 2);
            ctx.fill();

            // Bob body
            const gradient = ctx.createRadialGradient(bobX - 5, bobY - 5, 0, bobX, bobY, bobRadius);
            gradient.addColorStop(0, '#764ba2');
            gradient.addColorStop(1, '#667eea');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(bobX, bobY, bobRadius, 0, Math.PI * 2);
            ctx.fill();

            // Bob highlight
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.arc(bobX - 6, bobY - 6, 8, 0, Math.PI * 2);
            ctx.fill();

            // Draw arc showing angle
            ctx.strokeStyle = 'rgba(102, 126, 234, 0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 40, 0, angle);
            ctx.stroke();

            // Draw vertical reference line
            ctx.strokeStyle = 'rgba(160, 174, 192, 0.3)';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX, centerY + pixelLength + 20);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw angle label
            ctx.fillStyle = '#667eea';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText((angle * 180 / Math.PI).toFixed(1) + '¬∞', centerX + 60, centerY + 30);
        }

        // Animation loop
        function animate() {
            update();
            draw();
            if (isRunning) {
                animationId = requestAnimationFrame(animate);
            }
        }

        // Control handlers
        document.getElementById('startBtn').addEventListener('click', () => {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                document.getElementById('length').disabled = true;
                document.getElementById('angle').disabled = true;
                
                animate();
            }
        });

        document.getElementById('pauseBtn').addEventListener('click', () => {
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            isRunning = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
            }

            time = 0;
            length = parseFloat(document.getElementById('length').value) || 1.0;
            const angleDeg = parseFloat(document.getElementById('angle').value) || 30;
            angle = angleDeg * Math.PI / 180;
            initialAngle = angle;
            angularVelocity = 0;
            angularAcceleration = 0;

            // Calculate and display period
            const period = calculatePeriod(length, initialAngle);
            document.getElementById('periodDisplay').textContent = period.toFixed(3) + ' s';

            // Clear chart
            chartData.datasets[0].data = [];
            accelChart.update();

            draw();

            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('length').disabled = false;
            document.getElementById('angle').disabled = false;

            // Update displays
            document.getElementById('timeDisplay').textContent = '0.00 s';
            document.getElementById('angleDisplay').textContent = angleDeg.toFixed(2) + '¬∞';
            document.getElementById('omegaDisplay').textContent = '0.00 rad/s';
        });

        // Update parameters when inputs change
        ['length', 'angle'].forEach(id => {
            document.getElementById(id).addEventListener('change', (e) => {
                if (!isRunning) {
                    const value = parseFloat(e.target.value);
                    if (isNaN(value)) {
                        e.target.value = id === 'length' ? 1.0 : 30;
                        return;
                    }

                    // Enforce limits
                    if (id === 'length') {
                        e.target.value = Math.max(0.1, Math.min(5, value));
                        length = parseFloat(e.target.value);
                    } else {
                        e.target.value = Math.max(1, Math.min(179, value));
                        angle = parseFloat(e.target.value) * Math.PI / 180;
                        initialAngle = angle;
                    }

                    // Calculate and display period
                    const period = calculatePeriod(length, initialAngle);
                    document.getElementById('periodDisplay').textContent = period.toFixed(3) + ' s';

                    // Update display
                    document.getElementById('angleDisplay').textContent = (angle * 180 / Math.PI).toFixed(2) + '¬∞';

                    draw();
                }
            });
        });

        // Smooth scroll for nav links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Navbar shadow on scroll
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('.nav');
            if (window.scrollY > 50) {
                nav.style.boxShadow = '0 2px 30px rgba(0, 0, 0, 0.1)';
            } else {
                nav.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.05)';
            }
        });

        // Initial setup
        const initialPeriod = calculatePeriod(length, initialAngle);
        document.getElementById('periodDisplay').textContent = initialPeriod.toFixed(3) + ' s';
        document.getElementById('angleDisplay').textContent = (angle * 180 / Math.PI).toFixed(2) + '¬∞';
        draw();
    </script>
</body>
</html>