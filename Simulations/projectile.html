<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            color: #2d3748;
            overflow-x: hidden;
        }

        .nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 5%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .header {
            padding: 8rem 5% 2rem;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #718096;
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 5% 5rem;
        }

        .sim-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            height: 450px;
            background: linear-gradient(180deg, #e6f3ff 0%, #f7fafc 100%);
            border-radius: 15px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        #projectileCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .controls-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 15px;
        }

        .control-group h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            font-size: 0.9rem;
            color: #4a5568;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #718096;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 120px;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(250, 112, 154, 0.3);
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 30px;
            height: 4px;
            border-radius: 2px;
        }

        .launches-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }

        .launches-section h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: #2d3748;
        }

        .launch-card {
            background: #f7fafc;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        .launch-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .launch-number {
            font-weight: 700;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .launch-params {
            font-size: 0.9rem;
            color: #718096;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .data-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
        }

        .data-label {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 0.25rem;
        }

        .data-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
        }

        .data-comparison {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .data-sub {
            flex: 1;
        }

        .data-sub-label {
            font-size: 0.75rem;
            color: #718096;
        }

        .data-sub-value {
            font-size: 0.95rem;
            font-weight: 600;
        }

        .no-air {
            color: #38b2ac;
        }

        .with-air {
            color: #fa709a;
        }

        .theory-section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            line-height: 1.8;
        }

        .theory-section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #2d3748;
            position: relative;
            padding-bottom: 1rem;
        }

        .theory-section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .theory-section h3 {
            font-size: 1.3rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .theory-section p {
            color: #4a5568;
            margin-bottom: 1rem;
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border-left: 4px solid #667eea;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #2d3748;
            text-align: center;
            margin: 0.5rem 0;
        }

        .info-box {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .info-box p {
            color: #234e52;
            margin: 0;
        }

        footer {
            background: #2d3748;
            color: white;
            text-align: center;
            padding: 3rem 5%;
            margin-top: 5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            transition: transform 0.3s, color 0.3s;
            text-decoration: none;
        }

        .social-links a:hover {
            transform: translateY(-3px);
            color: #667eea;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .nav-links {
                display: none;
            }

            .controls-section {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .canvas-container {
                height: 350px;
            }

            .theory-section {
                padding: 1.5rem;
            }

            .data-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="../index.html" class="logo">STEM for All</a>
        <ul class="nav-links">
            <li><a href="../index.html">About</a></li>
            <li><a href="../simulations.html">Simulations</a></li>
            <li><a href="../articles.html">Articles</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <div class="header">
        <h1>🚀 Projectile Motion Simulation</h1>
        <p>Compare projectile trajectories with and without air resistance in real-time</p>
    </div>

    <div class="container">
        <div class="sim-section">
            <div class="canvas-container">
                <canvas id="projectileCanvas"></canvas>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #38b2ac;"></div>
                    <span>Without Air Resistance</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #fa709a;"></div>
                    <span>With Air Resistance</span>
                </div>
            </div>

            <div class="controls-section">
                <div class="control-group">
                    <h3>Launch Parameters</h3>
                    <div class="input-group">
                        <label for="velocity">Initial Velocity (m/s)</label>
                        <input type="number" id="velocity" min="5" max="100" step="1" value="30">
                        <div class="input-display">
                            <span>Min: 5 m/s</span>
                            <span>Max: 100 m/s</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="angle">Launch Angle (degrees)</label>
                        <input type="number" id="angle" min="1" max="89" step="1" value="45">
                        <div class="input-display">
                            <span>Min: 1°</span>
                            <span>Max: 89°</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Environment</h3>
                    <div class="input-group">
                        <label>Gravity (g)</label>
                        <input type="text" value="9.81 m/s²" disabled>
                    </div>
                    <div class="input-group">
                        <label>Air Drag Coefficient</label>
                        <input type="text" value="0.47 (sphere)" disabled>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" id="launchBtn">🚀 Launch</button>
                <button class="btn btn-danger" id="clearBtn">🗑️ Clear All</button>
            </div>
        </div>

        <div class="launches-section" id="launchesSection" style="display: none;">
            <h3>Launch History (Last 5)</h3>
            <div id="launchHistory"></div>
        </div>

        <div class="theory-section">
            <h2>Understanding Projectile Motion</h2>
            
            <p>Projectile motion describes the path of an object thrown or projected into the air, subject to only the acceleration of gravity. This simulation compares ideal projectile motion (no air resistance) with realistic motion (including air resistance).</p>

            <h3>Ideal Projectile Motion (No Air Resistance)</h3>
            <p>In the absence of air resistance, projectile motion can be analyzed by separating it into horizontal and vertical components:</p>

            <div class="formula-box">
                <p style="margin-bottom: 0.5rem; font-weight: 600;">Horizontal Motion (constant velocity):</p>
                <div class="formula">x = v₀ × cos(θ) × t</div>
                <p style="margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600;">Vertical Motion (constant acceleration):</p>
                <div class="formula">y = v₀ × sin(θ) × t - ½gt²</div>
            </div>

            <p>Key equations for ideal projectile motion:</p>

            <div class="formula-box">
                <p style="margin-bottom: 0.5rem; font-weight: 600;">Maximum Height:</p>
                <div class="formula">h_max = (v₀² × sin²(θ)) / (2g)</div>
                <p style="margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600;">Range:</p>
                <div class="formula">R = (v₀² × sin(2θ)) / g</div>
                <p style="margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600;">Time of Flight:</p>
                <div class="formula">T = (2v₀ × sin(θ)) / g</div>
            </div>

            <h3>Effect of Air Resistance</h3>
            <p>Air resistance (drag) is a force that opposes the motion of the projectile through the air. The drag force depends on:</p>
            <ul style="margin-left: 2rem; color: #4a5568;">
                <li>The velocity of the projectile (increases with velocity squared)</li>
                <li>The cross-sectional area of the object</li>
                <li>The air density</li>
                <li>The drag coefficient (shape-dependent)</li>
            </ul>

            <div class="formula-box">
                <p style="margin-bottom: 0.5rem; font-weight: 600;">Drag Force:</p>
                <div class="formula">F_drag = ½ × ρ × C_d × A × v²</div>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">where ρ is air density, C_d is drag coefficient, A is area, v is velocity</p>
            </div>

            <h3>Comparing Trajectories</h3>
            <p>When air resistance is included, you'll notice several key differences:</p>
            <ul style="margin-left: 2rem; color: #4a5568;">
                <li><strong>Reduced Range:</strong> The projectile doesn't travel as far horizontally</li>
                <li><strong>Lower Maximum Height:</strong> Air resistance slows vertical motion</li>
                <li><strong>Asymmetric Path:</strong> The descent is steeper than the ascent</li>
                <li><strong>Shorter Flight Time:</strong> The projectile lands sooner</li>
                <li><strong>Optimal Angle Changes:</strong> Maximum range occurs at angles less than 45°</li>
            </ul>

            <div class="info-box">
                <p><strong>💡 Key Insight:</strong> For ideal projectile motion, the maximum range occurs at 45°. With air resistance, the optimal angle is typically less than 45° (often around 35-40° depending on conditions). The simulation shows both trajectories simultaneously so you can observe these differences directly.</p>
            </div>

            <h3>Real-World Applications</h3>
            <p>Understanding projectile motion with air resistance is crucial for:</p>
            <ul style="margin-left: 2rem; color: #4a5568;">
                <li>Sports ballistics (golf, basketball, baseball)</li>
                <li>Military applications (artillery, missiles)</li>
                <li>Space mission planning</li>
                <li>Engineering design (water fountains, irrigation)</li>
            </ul>
        </div>
    </div>

    <footer id="contact">
        <div class="footer-content">
            <p>I try my best to get the science right, but if you catch something off, please let me know so I can correct it. Thank you!</p>
            <br>
            <h3>Contacts</h3>
            <div class="social-links">
                <a href="mailto:ayadianup37@gmail.com">📧</a>
                <a href="https://www.linkedin.com/in/anup-kumar-ayadi-044519277">💼</a>
            </div>
            <p style="margin-top: 2rem; color: #a0aec0;">© 2025 Anup Kumar Ayadi</p>
        </div>
    </footer>

    <script>
        const canvas = document.getElementById('projectileCanvas');
        const ctx = canvas.getContext('2d');

        // Physics constants
        const GRAVITY = 9.81;
        const AIR_DENSITY = 1.225; // kg/m³
        const DRAG_COEFF = 0.47; // sphere
        const PROJECTILE_MASS = 1; // kg
        const PROJECTILE_RADIUS = 0.1; // m
        const CROSS_SECTION_AREA = Math.PI * PROJECTILE_RADIUS * PROJECTILE_RADIUS;
        const TIME_STEP = 0.016;

        let launches = [];
        let animationId = null;
        let isAnimating = false;

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            draw();
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Trajectory {
            constructor(v0, angle, withAirResistance) {
                this.v0 = v0;
                this.angle = angle * Math.PI / 180;
                this.withAirResistance = withAirResistance;
                this.points = [];
                this.maxHeight = 0;
                this.range = 0;
                this.flightTime = 0;
                this.calculate();
            }

            calculate() {
                let t = 0;
                let x = 0;
                let y = 0;
                let vx = this.v0 * Math.cos(this.angle);
                let vy = this.v0 * Math.sin(this.angle);

                this.points.push({ x: 0, y: 0 });

                while (y >= 0 && t < 20) {
                    t += TIME_STEP;

                    if (this.withAirResistance) {
                        const v = Math.sqrt(vx * vx + vy * vy);
                        const dragForce = 0.5 * AIR_DENSITY * DRAG_COEFF * CROSS_SECTION_AREA * v * v;
                        const dragAccelX = -(dragForce / PROJECTILE_MASS) * (vx / v);
                        const dragAccelY = -(dragForce / PROJECTILE_MASS) * (vy / v);

                        vx += dragAccelX * TIME_STEP;
                        vy += (dragAccelY - GRAVITY) * TIME_STEP;
                    } else {
                        vy -= GRAVITY * TIME_STEP;
                    }

                    x += vx * TIME_STEP;
                    y += vy * TIME_STEP;

                    if (y >= 0) {
                        this.points.push({ x, y });
                        this.maxHeight = Math.max(this.maxHeight, y);
                    }
                }

                this.range = x;
                this.flightTime = t;
            }
        }

        class Launch {
            constructor(v0, angle, launchNumber) {
                this.v0 = v0;
                this.angle = angle;
                this.launchNumber = launchNumber;
                this.noAir = new Trajectory(v0, angle, false);
                this.withAir = new Trajectory(v0, angle, true);
                this.currentFrame = 0;
                this.maxFrames = Math.max(this.noAir.points.length, this.withAir.points.length);
                this.completed = false;
            }

            update() {
                if (this.currentFrame < this.maxFrames) {
                    this.currentFrame++;
                } else {
                    this.completed = true;
                }
            }
        }

        function worldToScreen(worldX, worldY) {
            const padding = 40;
            const maxRange = Math.max(...launches.map(l => 
                Math.max(l.noAir.range, l.withAir.range)
            ), 50);
            const maxHeight = Math.max(...launches.map(l => 
                Math.max(l.noAir.maxHeight, l.withAir.maxHeight)
            ), 20);

            const scaleX = (canvas.width - 2 * padding) / maxRange;
            const scaleY = (canvas.height - 2 * padding) / maxHeight;
            const scale = Math.min(scaleX, scaleY);

            return {
                x: padding + worldX * scale,
                y: canvas.height - padding - worldY * scale
            };
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 40;

            // Draw ground
            ctx.strokeStyle = '#4a5568';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.stroke();

            // Draw launch point
            const launchPoint = worldToScreen(0, 0);
            ctx.fillStyle = '#2d3748';
            ctx.beginPath();
            ctx.arc(launchPoint.x, launchPoint.y, 6, 0, Math.PI * 2);
            ctx.fill();

            // Draw trajectories
            launches.forEach(launch => {
                const opacity = launch.completed ? 0.3 : 1;

                // Draw without air resistance
                ctx.strokeStyle = `rgba(56, 178, 172, ${opacity})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                const maxPointsNoAir = Math.min(launch.currentFrame, launch.noAir.points.length);
                for (let i = 0; i < maxPointsNoAir; i++) {
                    const point = launch.noAir.points[i];
                    const screen = worldToScreen(point.x, point.y);
                    if (i === 0) ctx.moveTo(screen.x, screen.y);
                    else ctx.lineTo(screen.x, screen.y);
                }
                ctx.stroke();

                // Draw projectile (no air)
                if (maxPointsNoAir > 0 && maxPointsNoAir <= launch.noAir.points.length) {
                    const point = launch.noAir.points[maxPointsNoAir - 1];
                    const screen = worldToScreen(point.x, point.y);
                    ctx.fillStyle = `rgba(56, 178, 172, ${opacity})`;
                    ctx.beginPath();
                    ctx.arc(screen.x, screen.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Draw with air resistance
                ctx.strokeStyle = `rgba(250, 112, 154, ${opacity})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                const maxPointsWithAir = Math.min(launch.currentFrame, launch.withAir.points.length);
                for (let i = 0; i < maxPointsWithAir; i++) {
                    const point = launch.withAir.points[i];
                    const screen = worldToScreen(point.x, point.y);
                    if (i === 0) ctx.moveTo(screen.x, screen.y);
                    else ctx.lineTo(screen.x, screen.y);
                }
                ctx.stroke();

                // Draw projectile (with air)
                if (maxPointsWithAir > 0 && maxPointsWithAir <= launch.withAir.points.length) {
                    const point = launch.withAir.points[maxPointsWithAir - 1];
                    const screen = worldToScreen(point.x, point.y);
                    ctx.fillStyle = `rgba(250, 112, 154, ${opacity})`;
                    ctx.beginPath();
                    ctx.arc(screen.x, screen.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            // Draw grid
            ctx.strokeStyle = 'rgba(160, 174, 192, 0.2)';
            ctx.lineWidth = 1;
            const gridSpacing = 10;
            for (let i = 0; i <= 200; i += gridSpacing) {
                const screen = worldToScreen(i, 0);
                if (screen.x < canvas.width - padding) {
                    ctx.beginPath();
                    ctx.moveTo(screen.x, padding);
                    ctx.lineTo(screen.x, canvas.height - padding);
                    ctx.stroke();
                }
            }
        }

        function animate() {
            let anyActive = false;
            launches.forEach(launch => {
                if (!launch.completed) {
                    launch.update();
                    anyActive = true;
                }
            });

            draw();

            if (anyActive) {
                animationId = requestAnimationFrame(animate);
            } else {
                isAnimating = false;
            }
        }

        function updateLaunchHistory() {
            const historyDiv = document.getElementById('launchHistory');
            const section = document.getElementById('launchesSection');
            
            if (launches.length === 0) {
                section.style.display = 'none';
                return;
            }

            section.style.display = 'block';
            historyDiv.innerHTML = '';

            launches.slice().reverse().forEach(launch => {
            const card = document.createElement('div');
            card.className = 'launch-card';
            
            const diffRange = ((launch.noAir.range - launch.withAir.range) / launch.noAir.range * 100).toFixed(1);
            const diffHeight = ((launch.noAir.maxHeight - launch.withAir.maxHeight) / launch.noAir.maxHeight * 100).toFixed(1);
            const diffTime = ((launch.noAir.flightTime - launch.withAir.flightTime) / launch.noAir.flightTime * 100).toFixed(1);

            card.innerHTML = `
                <div class="launch-header">
                    <div class="launch-number">Launch #${launch.launchNumber}</div>
                    <div class="launch-params">v₀ = ${launch.v0} m/s, θ = ${launch.angle}°</div>
                </div>
                <div class="data-grid">
                    <div class="data-item">
                        <div class="data-label">Range</div>
                        <div class="data-comparison">
                            <div class="data-sub">
                                <div class="data-sub-label">No Air</div>
                                <div class="data-sub-value no-air">${launch.noAir.range.toFixed(2)} m</div>
                            </div>
                            <div class="data-sub">
                                <div class="data-sub-label">With Air</div>
                                <div class="data-sub-value with-air">${launch.withAir.range.toFixed(2)} m</div>
                            </div>
                        </div>
                        <div class="data-sub-label" style="margin-top: 0.5rem;">Difference: ${diffRange}%</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Max Height</div>
                        <div class="data-comparison">
                            <div class="data-sub">
                                <div class="data-sub-label">No Air</div>
                                <div class="data-sub-value no-air">${launch.noAir.maxHeight.toFixed(2)} m</div>
                            </div>
                            <div class="data-sub">
                                <div class="data-sub-label">With Air</div>
                                <div class="data-sub-value with-air">${launch.withAir.maxHeight.toFixed(2)} m</div>
                            </div>
                        </div>
                        <div class="data-sub-label" style="margin-top: 0.5rem;">Difference: ${diffHeight}%</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Flight Time</div>
                        <div class="data-comparison">
                            <div class="data-sub">
                                <div class="data-sub-label">No Air</div>
                                <div class="data-sub-value no-air">${launch.noAir.flightTime.toFixed(2)} s</div>
                            </div>
                            <div class="data-sub">
                                <div class="data-sub-label">With Air</div>
                                <div class="data-sub-value with-air">${launch.withAir.flightTime.toFixed(2)} s</div>
                            </div>
                        </div>
                        <div class="data-sub-label" style="margin-top: 0.5rem;">Difference: ${diffTime}%</div>
                    </div>
                </div>
            `;
            
            historyDiv.appendChild(card);
        });
        }

        document.getElementById('launchBtn').addEventListener('click', () => {
            const velocity = parseFloat(document.getElementById('velocity').value);
            const angle = parseFloat(document.getElementById('angle').value);

            if (isNaN(velocity) || isNaN(angle)) {
                alert('Please enter valid values for velocity and angle.');
                return;
            }

            // Remove oldest launch if we have 5
            if (launches.length >= 5) {
                launches.shift();
            }

            const launchNumber = launches.length > 0 ? 
                Math.max(...launches.map(l => l.launchNumber)) + 1 : 1;

            const launch = new Launch(velocity, angle, launchNumber);
            launches.push(launch);

            updateLaunchHistory();

            if (!isAnimating) {
                isAnimating = true;
                animate();
            }
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            launches = [];
            updateLaunchHistory();
            draw();
            if (animationId) {
                cancelAnimationFrame(animationId);
                isAnimating = false;
            }
        });

        // Input validation
        ['velocity', 'angle'].forEach(id => {
            document.getElementById(id).addEventListener('change', (e) => {
                const value = parseFloat(e.target.value);
                if (isNaN(value)) {
                    e.target.value = id === 'velocity' ? 30 : 45;
                    return;
                }

                if (id === 'velocity') {
                    e.target.value = Math.max(5, Math.min(100, value));
                } else {
                    e.target.value = Math.max(1, Math.min(89, value));
                }
            });
        });

        // Smooth scroll for nav links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Navbar shadow on scroll
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('.nav');
            if (window.scrollY > 50) {
                nav.style.boxShadow = '0 2px 30px rgba(0, 0, 0, 0.1)';
            } else {
                nav.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.05)';
            }
        });

        // Initial draw
        draw();
    </script>
</body>
</html>